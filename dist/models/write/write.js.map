{"version":3,"sources":["../../../src/models/write/write.js"],"names":["Write","characteristicToWriteTo","bytesToWrite","commandToExecute","characteristic","bytes","command","state","Prepared","error","undefined","transferObject","Verify","objectType","dataView","DataView","ArrayBuffer","setUint8","SELECT","buffer","Create","length","CREATE","setUint32","PacketReturnNotification","packageCount","SET_PRN","setUint16","Package","Checksum","CALCULATE_CHECKSUM","Execute","EXECUTE"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;IAEaA,K,WAAAA,K,GACX,eAAaC,uBAAb,EAAsCC,YAAtC,EAAoDC,gBAApD,EAAsE;AAAA;;AACpE,OAAKC,cAAL,GAAsBH,uBAAtB;AACA,OAAKI,KAAL,GAAaH,YAAb;AACA,OAAKI,OAAL,GAAeH,gBAAf;AACA,OAAKI,KAAL,GAAa,4BAAmBC,QAAhC;AACA,OAAKC,KAAL,GAAaC,SAAb;AACA,OAAKC,cAAL,GAAsBD,SAAtB;AACD,C;;IAGUE,M,WAAAA,M;;;AACX,kBAAaR,cAAb,EAA4BS,UAA5B,EAAwC;AAAA;;AACtC,QAAIC,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWC,MAAhC;AACAJ,aAASG,QAAT,CAAkB,CAAlB,EAAqBJ,UAArB;AAHsC,iIAIhCT,cAJgC,EAIhBU,SAASK,MAJO,EAIC,qBAAWD,MAJZ;AAKvC;;;EANyBlB,K;;IASfoB,M,WAAAA,M;;;AACX,kBAAchB,cAAd,EAA8BS,UAA9B,EAA0CQ,MAA1C,EAAkD;AAAA;;AAChD,QAAIP,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWK,MAAhC;AACAR,aAASG,QAAT,CAAkB,CAAlB,EAAqBJ,UAArB;;AAEAC,aAASS,SAAT,CAAmB,CAAnB,EAAsBF,MAAtB,EAA8B,IAA9B;AALgD,iIAM1CjB,cAN0C,EAM1BU,SAASK,MANiB,EAMT,qBAAWG,MANF;AAOjD;;;EARyBtB,K;;IAWfwB,wB,WAAAA,wB;;;AACX,oCAAapB,cAAb,EAA4BqB,YAA5B,EAA0C;AAAA;;AACxC,QAAIX,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWS,OAAhC;;AAEAZ,aAASa,SAAT,CAAmB,CAAnB,EAAsBF,YAAtB,EAAoC,IAApC;AAJwC,qKAKlCrB,cALkC,EAKlBU,SAASK,MALS,EAKD,qBAAWO,OALV;AAOzC;;;EAR2C1B,K;;IAWjC4B,O,WAAAA,O;;;AACX,mBAAaxB,cAAb,EAA6Be,MAA7B,EAAqC;AAAA;AAAA,mIAC7Bf,cAD6B,EACbe,MADa,EACLT,SADK;AAEpC;;;EAH0BV,K;;IAMhB6B,Q,WAAAA,Q;;;AACX,oBAAazB,cAAb,EAA6B;AAAA;;AAC3B,QAAIU,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWa,kBAAhC;AAF2B,qIAGrB1B,cAHqB,EAGLU,SAASK,MAHJ,EAGY,qBAAWW,kBAHvB;AAI5B;;;EAL2B9B,K;;IAQjB+B,O,WAAAA,O;;;AACX,mBAAa3B,cAAb,EAA6B;AAAA;;AAC3B,QAAIU,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWe,OAAhC;AAF2B,mIAGrB5B,cAHqB,EAGLU,SAASK,MAHJ,EAGY,qBAAWa,OAHvB;AAI5B;;;EAL0BhC,K","file":"write.js","sourcesContent":["import TransmissionStatus from '../transmission-types'\nimport WriteTypes from './write-types'\n\nexport class Write {\n  constructor (characteristicToWriteTo, bytesToWrite, commandToExecute) {\n    this.characteristic = characteristicToWriteTo\n    this.bytes = bytesToWrite\n    this.command = commandToExecute\n    this.state = TransmissionStatus.Prepared\n    this.error = undefined\n    this.transferObject = undefined\n  }\n}\n\nexport class Verify extends Write {\n  constructor (characteristic,objectType) {\n    let dataView = new DataView(new ArrayBuffer(2))\n    dataView.setUint8(0, WriteTypes.SELECT)\n    dataView.setUint8(1, objectType)\n    super(characteristic, dataView.buffer, WriteTypes.SELECT);\n  }\n}\n\nexport class Create extends Write {\n  constructor  (characteristic, objectType, length) {\n    let dataView = new DataView(new ArrayBuffer(6))\n    dataView.setUint8(0, WriteTypes.CREATE)\n    dataView.setUint8(1, objectType)\n    /** Data length set to little endian converstion */\n    dataView.setUint32(2, length, true)\n    super(characteristic, dataView.buffer, WriteTypes.CREATE);\n  }\n}\n\nexport class PacketReturnNotification extends Write {\n  constructor (characteristic,packageCount) {\n    let dataView = new DataView(new ArrayBuffer(3))\n    dataView.setUint8(0, WriteTypes.SET_PRN)\n    /** Set the package received notification to the number of expected packages */\n    dataView.setUint16(1, packageCount, true)\n    super(characteristic, dataView.buffer, WriteTypes.SET_PRN);\n\n  }\n}\n\nexport class Package extends Write {\n  constructor (characteristic, buffer) {\n    super(characteristic, buffer, undefined);\n  }\n}\n\nexport class Checksum extends Write {\n  constructor (characteristic) {\n    let dataView = new DataView(new ArrayBuffer(1))\n    dataView.setUint8(0, WriteTypes.CALCULATE_CHECKSUM)\n    super(characteristic, dataView.buffer, WriteTypes.CALCULATE_CHECKSUM);\n  }\n}\n\nexport class Execute extends Write {\n  constructor (characteristic) {\n    let dataView = new DataView(new ArrayBuffer(1))\n    dataView.setUint8(0, WriteTypes.EXECUTE)\n    super(characteristic, dataView.buffer, WriteTypes.EXECUTE);\n  }\n}\n"]}