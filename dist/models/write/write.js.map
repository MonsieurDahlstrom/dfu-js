{"version":3,"sources":["../../../src/models/write/write.js"],"names":["Write","characteristicToWriteTo","bytesToWrite","commandToExecute","characteristic","bytes","command","state","Prepared","error","undefined","transferObject","Verify","objectType","dataView","DataView","ArrayBuffer","setUint8","SELECT","buffer","Create","length","console","log","CREATE","setUint32","PacketReturnNotification","packageCount","SET_PRN","setUint16","Package","Checksum","CALCULATE_CHECKSUM","Execute","EXECUTE"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;IAEaA,K,WAAAA,K,GACX,eAAaC,uBAAb,EAAsCC,YAAtC,EAAoDC,gBAApD,EAAsE;AAAA;;AACpE,OAAKC,cAAL,GAAsBH,uBAAtB;AACA,OAAKI,KAAL,GAAaH,YAAb;AACA,OAAKI,OAAL,GAAeH,gBAAf;AACA,OAAKI,KAAL,GAAa,4BAAmBC,QAAhC;AACA,OAAKC,KAAL,GAAaC,SAAb;AACA,OAAKC,cAAL,GAAsBD,SAAtB;AACD,C;;IAGUE,M,WAAAA,M;;;AACX,kBAAaR,cAAb,EAA4BS,UAA5B,EAAwC;AAAA;;AACtC,QAAIC,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWC,MAAhC;AACAJ,aAASG,QAAT,CAAkB,CAAlB,EAAqBJ,UAArB;AAHsC,iIAIhCT,cAJgC,EAIhBU,SAASK,MAJO,EAIC,qBAAWD,MAJZ;AAKvC;;;EANyBlB,K;;IASfoB,M,WAAAA,M;;;AACX,kBAAchB,cAAd,EAA8BS,UAA9B,EAA0CQ,MAA1C,EAAkD;AAAA;;AAChDC,YAAQC,GAAR,CAAY,2BAAZ;AACA,QAAIT,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWO,MAAhC;AACAV,aAASG,QAAT,CAAkB,CAAlB,EAAqBJ,UAArB;;AAEAC,aAASW,SAAT,CAAmB,CAAnB,EAAsBJ,MAAtB,EAA8B,IAA9B;AANgD,iIAO1CjB,cAP0C,EAO1BU,SAASK,MAPiB,EAOT,qBAAWK,MAPF;AAQjD;;;EATyBxB,K;;IAYf0B,wB,WAAAA,wB;;;AACX,oCAAatB,cAAb,EAA4BuB,YAA5B,EAA0C;AAAA;;AACxC,QAAIb,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWW,OAAhC;;AAEAd,aAASe,SAAT,CAAmB,CAAnB,EAAsBF,YAAtB,EAAoC,IAApC;AAJwC,qKAKlCvB,cALkC,EAKlBU,SAASK,MALS,EAKD,qBAAWS,OALV;AAOzC;;;EAR2C5B,K;;IAWjC8B,O,WAAAA,O;;;AACX,mBAAa1B,cAAb,EAA6Be,MAA7B,EAAqC;AAAA;AAAA,mIAC7Bf,cAD6B,EACbe,MADa,EACLT,SADK;AAEpC;;;EAH0BV,K;;IAMhB+B,Q,WAAAA,Q;;;AACX,oBAAa3B,cAAb,EAA6B;AAAA;;AAC3B,QAAIU,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWe,kBAAhC;AAF2B,qIAGrB5B,cAHqB,EAGLU,SAASK,MAHJ,EAGY,qBAAWa,kBAHvB;AAI5B;;;EAL2BhC,K;;IAQjBiC,O,WAAAA,O;;;AACX,mBAAa7B,cAAb,EAA6B;AAAA;;AAC3B,QAAIU,WAAW,IAAIC,QAAJ,CAAa,IAAIC,WAAJ,CAAgB,CAAhB,CAAb,CAAf;AACAF,aAASG,QAAT,CAAkB,CAAlB,EAAqB,qBAAWiB,OAAhC;AAF2B,mIAGrB9B,cAHqB,EAGLU,SAASK,MAHJ,EAGY,qBAAWe,OAHvB;AAI5B;;;EAL0BlC,K","file":"write.js","sourcesContent":["import TransmissionStatus from '../transmission-types'\nimport WriteTypes from './write-types'\n\nexport class Write {\n  constructor (characteristicToWriteTo, bytesToWrite, commandToExecute) {\n    this.characteristic = characteristicToWriteTo\n    this.bytes = bytesToWrite\n    this.command = commandToExecute\n    this.state = TransmissionStatus.Prepared\n    this.error = undefined\n    this.transferObject = undefined\n  }\n}\n\nexport class Verify extends Write {\n  constructor (characteristic,objectType) {\n    let dataView = new DataView(new ArrayBuffer(2))\n    dataView.setUint8(0, WriteTypes.SELECT)\n    dataView.setUint8(1, objectType)\n    super(characteristic, dataView.buffer, WriteTypes.SELECT);\n  }\n}\n\nexport class Create extends Write {\n  constructor  (characteristic, objectType, length) {\n    console.log('EFFING CREATE CONSTRUCTOR')\n    let dataView = new DataView(new ArrayBuffer(6))\n    dataView.setUint8(0, WriteTypes.CREATE)\n    dataView.setUint8(1, objectType)\n    /** Data length set to little endian converstion */\n    dataView.setUint32(2, length, true)\n    super(characteristic, dataView.buffer, WriteTypes.CREATE);\n  }\n}\n\nexport class PacketReturnNotification extends Write {\n  constructor (characteristic,packageCount) {\n    let dataView = new DataView(new ArrayBuffer(3))\n    dataView.setUint8(0, WriteTypes.SET_PRN)\n    /** Set the package received notification to the number of expected packages */\n    dataView.setUint16(1, packageCount, true)\n    super(characteristic, dataView.buffer, WriteTypes.SET_PRN);\n\n  }\n}\n\nexport class Package extends Write {\n  constructor (characteristic, buffer) {\n    super(characteristic, buffer, undefined);\n  }\n}\n\nexport class Checksum extends Write {\n  constructor (characteristic) {\n    let dataView = new DataView(new ArrayBuffer(1))\n    dataView.setUint8(0, WriteTypes.CALCULATE_CHECKSUM)\n    super(characteristic, dataView.buffer, WriteTypes.CALCULATE_CHECKSUM);\n  }\n}\n\nexport class Execute extends Write {\n  constructor (characteristic) {\n    let dataView = new DataView(new ArrayBuffer(1))\n    dataView.setUint8(0, WriteTypes.EXECUTE)\n    super(characteristic, dataView.buffer, WriteTypes.EXECUTE);\n  }\n}\n"]}