(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{208:function(e,t){},210:function(e,t){},241:function(e,t,r){"use strict";r.r(t);r(36);var n=r(5),c={name:"BluetoothDeviceListEntry",props:{deviceId:{type:String,optional:!1,default:""}},data:function(){return{connectingAndDiscovering:!1}},computed:{device:function(){return this.$store.getters["webBluetooth/device"](this.deviceId)},bluetoothIconClasses:function(){return{icon:!0,"is-large":!0,"has-text-info":this.device&&this.device.gatt.connected}},deviceButtonClasses:function(){return{"is-loading":this.connectingAndDiscovering,button:!0,"is-outlined":!0}}},methods:{select:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.device.gatt.connected){e.next=4;break}this.$emit("connected-device-clicked",this.device.id),e.next=14;break;case 4:return this.connectingAndDiscovering=!0,e.prev=5,e.next=8,this.$store.dispatch("webBluetooth/connectDevice",{device:this.device});case 8:return e.next=10,this.$store.dispatch("webBluetooth/discoverServices",{device:this.device});case 10:this.$emit("connected-device-clicked",this.device.id);case 11:return e.prev=11,this.connectingAndDiscovering=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[5,,11,14]])}));return function(){return e.apply(this,arguments)}}(),remove:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("webBluetooth/removeDevice",{device:this.device});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},o=r(6),l=Object(o.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticStyle:{"margin-bottom":"0.5rem"}},[r("div",{staticClass:"buttons"},[r("span",{staticClass:"button is-danger",on:{click:e.remove}},[r("i",{staticClass:"mdi mdi-window-close",attrs:{"aria-hidden":"true"}})]),e._v(" "),r("span",{class:e.deviceButtonClasses,on:{click:e.select}},[r("span",{class:e.bluetoothIconClasses},[r("i",{staticClass:"mdi mdi-24px mdi-bluetooth-connect",attrs:{"aria-hidden":"true"}})]),e._v(" "),r("span",[e._v("\n        "+e._s(e.device.name)+"\n      ")])])])])},[],!1,null,null,null).exports,d=r(172),v={name:"BluetoothDeviceList",components:{DeviceEntry:l},computed:{devices:function(){return this.$store.state.webBluetooth.devices}},methods:{addDeviceClicked:function(e){var t={anyDevices:!0,services:[d.b.DFU,"device_information"]};this.$store.dispatch("webBluetooth/addDevice",t)}}},h=Object(o.a)(v,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("p",{staticClass:"title has-text-centered"},[e._v("\n    Bluetooth Devices\n  ")]),e._v(" "),r("ul",{},e._l(e.devices,function(t){return r("DeviceEntry",{key:t.id,attrs:{"device-id":t.id},on:{"connected-device-clicked":function(r){return e.$emit("device-picked-from-list",t.id)}}})}),1),e._v(" "),r("button",{staticClass:"button is-outlined is-fullwidth",on:{click:e.addDeviceClicked}},[e._v("\n    Connect Device\n  ")])])},[],!1,null,null,null).exports,m=r(34),f=(r(51),r(203)),_=r.n(f),C={name:"DeviceFirmwareUpdate",mixins:[d.d,m.a],props:{service:{required:!0,validator:function(e){return"BluetoothRemoteGATTService"===e.constructor.name}}},data:function(){return{fileName:""}},computed:{webBluetoothPacketPoint:function(){return this.$store.getters["webBluetooth/characteristicForService"](this.service,d.a.PacketPoint)},webBluetoothControlPoint:function(){return this.$store.getters["webBluetooth/characteristicForService"](this.service,d.a.ControlPoint)}},methods:{processFile:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files,e.prev=1,n=new _.a,e.next=5,n.loadAsync(r[0]);case 5:return e.next=7,this.firmwareFromZip(n);case 7:this.fileName=r[0].name,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),upload:function(){this.dfuFirmware instanceof d.c&&this.performDFU()},cancel:function(){this.resetDFU()}}},w=Object(o.a)(C,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.dfuIdle?r("div",[r("label",{staticClass:"file-label has-name is-fullwidth"},[r("input",{staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{change:e.processFile}}),e._v(" "),e._m(0),e._v(" "),""!=e.fileName?r("span",{staticClass:"file-name"},[e._v("\n        "+e._s(e.fileName)+"\n      ")]):e._e()]),e._v(" "),r("a",{staticClass:"button is-primary",staticStyle:{"margin-top":"0.5rem"},on:{click:e.upload}},[e._v("\n      Update Device\n    ")])]):e._e(),e._v(" "),e.dfuInProgress?r("div",{staticClass:"columns is-vcentered"},[r("div",{staticClass:"column auto"},[r("progress",{staticClass:"progress is-primary",attrs:{max:"1.0"},domProps:{value:e.dfuProgress}})]),e._v(" "),r("div",{staticClass:"column is-one-third has-text-centered"},[r("a",{staticClass:"button is-danger",staticStyle:{"margin-top":"0.5rem"},on:{click:e.cancel}},[e._v("\n        Cancel\n      ")])])]):e._e(),e._v(" "),e.dfuFailed?r("div",{staticClass:"columns is-vcentered"},[e._m(1),e._v(" "),r("div",{staticClass:"column is-one-third has-text-centered"},[r("b-button",{attrs:{type:"is-danger"},on:{click:e.cancel}},[e._v("Try Again")])],1)]):e._e()])},[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-icon"},[t("i",{staticClass:"mdi mdi-upload"})]),this._v(" "),t("span",{staticClass:"file-label"},[this._v("\n          Pick DFU Package\n        ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"column auto"},[t("p",{staticClass:"has-text-danger"},[this._v("Device Firmware Update failed")])])}],!1,null,null,null).exports,D={name:"FormField",props:{label:{type:String,default:"Label"},text:{type:String,default:"value"}}},F={name:"DeviceInformation",components:{FormField:Object(o.a)(D,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"field is-horizontal"},[t("div",{staticClass:"field-label is-small"},[t("label",{staticClass:"label"},[this._v(this._s(this.label))])]),this._v(" "),t("div",{staticClass:"field-body"},[t("div",{staticClass:"field"},[t("p",{staticClass:"control has-icons-left"},[t("input",{staticClass:"input is-small",attrs:{type:"text",readonly:""},domProps:{value:this.text}}),this._v(" "),this._m(0)])])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small is-left"},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports},mixins:[m.a],props:{service:{required:!0,validator:function(e){return"BluetoothRemoteGATTService"===e.constructor.name}}},computed:{softwareRevision:function(){var e=this.$store.getters["webBluetooth/characteristicForService"](this.service,this.deviceInformationService.SoftwareRevision.uuid);return e?this.stringForCharacteristicValue(e.value):""},hardwareRevision:function(){var e=this.$store.getters["webBluetooth/characteristicForService"](this.service,this.deviceInformationService.HardwareRevision.uuid);return e?this.stringForCharacteristicValue(e.value):""},firmwareRevision:function(){var e=this.$store.getters["webBluetooth/characteristicForService"](this.service,this.deviceInformationService.FirmwareRevision.uuid);return e?this.stringForCharacteristicValue(e.value):""}}},x={name:"BluetoothServiceList",components:{DeviceFirmwareUpdate:w,DeviceInformation:Object(o.a)(F,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-third"},[t("FormField",{attrs:{label:"Software",text:this.softwareRevision}})],1),this._v(" "),t("div",{staticClass:"column is-one-third"},[t("FormField",{attrs:{label:"Hardware",text:this.hardwareRevision}})],1),this._v(" "),t("div",{staticClass:"column is-one-third"},[t("FormField",{attrs:{label:"Firmware",text:this.firmwareRevision}})],1)])},[],!1,null,null,null).exports},mixins:[m.a],props:{deviceId:{type:String,required:!0,default:void 0}},computed:{device:function(){return this.$store.getters["webBluetooth/device"](this.deviceId)},disService:function(){return this.$store.getters["webBluetooth/serviceForDevice"](this.deviceId,this.deviceInformationService.uuid)},dfuService:function(){return this.$store.getters["webBluetooth/serviceForDevice"](this.deviceId,d.b.DFU)},dfuControlPoint:function(){return this.$store.getters["webBluetooth/characteristicForService"](this.dfuService,d.a.ControlPoint)},dfuPacketPoint:function(){return this.$store.getters["webBluetooth/characteristicForService"](this.dfuService,d.a.PacketPoint)}}},S={name:"BluetoothView",components:{BluetoothList:h,BluetoothServices:Object(o.a)(x,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("p",{staticClass:"card-header-title"},[e._v(e._s(e.device.name))])]),e._v(" "),r("div",{staticClass:"card-content"},[e.disService?r("DeviceInformation",{attrs:{service:e.disService}}):e._e(),e._v(" "),e.dfuService?r("DeviceFirmwareUpdate",{attrs:{service:e.dfuService}}):e._e()],1)])},[],!1,null,null,null).exports},layout:"monsieur-dahlstrom",data:function(){return{currentDeviceID:void 0,browserCheck:void 0}},computed:{device:function(){return this.$store.getters["webBluetooth/device"](this.currentDeviceID)}},methods:{displayDevice:function(e){this.currentDeviceID=e}}},B=Object(o.a)(S,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tile is-ancestor"},[r("div",{staticClass:"tile is-parent is-5"},[r("div",{staticClass:"tile is-child"},[r("BluetoothList",{on:{"device-picked-from-list":e.displayDevice}})],1)]),e._v(" "),r("div",{staticClass:"tile is-parent is-7"},[r("div",{staticClass:"tile is-child"},[e.currentDeviceID&&e.device&&e.currentDeviceID===e.device.id&&e.device.gatt.connected?r("BluetoothServices",{attrs:{"device-id":e.currentDeviceID}}):e._e()],1)])])},[],!1,null,null,null);t.default=B.exports}}]);